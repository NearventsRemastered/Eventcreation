{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport axios from 'axios';\nimport { db, collection, addDoc } from \"../firebase.js\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function App() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    actesCulturals = _useState2[0],\n    setActesCulturals = _useState2[1];\n  var currentLocation = {\n    lat: 41.38879,\n    lon: 2.15899\n  };\n  useEffect(function () {\n    var currentDate = new Date();\n    var formattedDate = currentDate.toISOString().substring(0, 10);\n    axios.get('https://analisi.transparenciacatalunya.cat/resource/rhpv-yr4f.json?$where=data_fi>%27' + formattedDate + '%27').then(function () {\n      var _ref = _asyncToGenerator(function* (response) {\n        var filteredData = response.data;\n        setActesCulturals(filteredData.map(function (acteCultural) {\n          return acteCultural;\n        }));\n        for (var acteCultural of filteredData) {\n          var res = yield addDoc(collection(db, 'event'), acteCultural);\n        }\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()).catch(function (error) {\n      console.log(error);\n    });\n  }, []);\n  return _jsx(View, {\n    style: styles.container,\n    children: actesCulturals.map(function (acteCultural, index) {\n      return _jsxs(Text, {\n        children: [acteCultural.denominaci, \" \", acteCultural.data_fi, \" \", acteCultural.comarca_i_municipi]\n      }, index);\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","StyleSheet","Text","View","axios","db","collection","addDoc","jsxs","_jsxs","jsx","_jsx","App","_useState","_useState2","_slicedToArray","actesCulturals","setActesCulturals","currentLocation","lat","lon","currentDate","Date","formattedDate","toISOString","substring","get","then","_ref","_asyncToGenerator","response","filteredData","data","map","acteCultural","res","_x","apply","arguments","catch","error","console","log","style","styles","container","children","index","denominaci","data_fi","comarca_i_municipi","create","flex","backgroundColor","alignItems","justifyContent"],"sources":["C:/Users/Jordi/Desktop/apiex/MiProyecto/src/ApiExample.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { StyleSheet, Text, View } from 'react-native';\r\nimport axios from 'axios';\r\nimport { db, collection, addDoc } from '../firebase.js';\r\n\r\nexport default function App() {\r\n  const [actesCulturals, setActesCulturals] = useState([]);\r\n\r\n    const currentLocation = { lat: 41.38879, lon: 2.15899 }; // coordenadas de ejemplo\r\n\r\n  useEffect(() => {\r\n    const currentDate = new Date();\r\n    const formattedDate = currentDate.toISOString().substring(0, 10);\r\n    axios\r\n      .get('https://analisi.transparenciacatalunya.cat/resource/rhpv-yr4f.json?$where=data_fi>%27'+formattedDate+'%27')\r\n      .then(async (response) => {\r\n        const filteredData = response.data;\r\n        setActesCulturals(filteredData.map((acteCultural) => acteCultural));\r\n  \r\n        // Guarda los datos en Firebase\r\n        for (let acteCultural of filteredData) {\r\n          const res = await addDoc(collection(db, 'event'), acteCultural);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  }, []);\r\n  \r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      {actesCulturals.map((acteCultural, index) => (\r\n        <Text key={index}>{acteCultural.denominaci} {acteCultural.data_fi} {acteCultural.comarca_i_municipi}</Text>\r\n      ))}\r\n    </View>\r\n  );\r\n}\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n});\r\n\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAAC,OAAAC,UAAA;AAAA,OAAAC,IAAA;AAAA,OAAAC,IAAA;AAEnD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,EAAE,EAAEC,UAAU,EAAEC,MAAM;AAAyB,SAAAC,IAAA,IAAAC,KAAA;AAAA,SAAAC,GAAA,IAAAC,IAAA;AAExD,eAAe,SAASC,GAAGA,CAAA,EAAG;EAC5B,IAAAC,SAAA,GAA4Cd,QAAQ,CAAC,EAAE,CAAC;IAAAe,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAjDG,cAAc,GAAAF,UAAA;IAAEG,iBAAiB,GAAAH,UAAA;EAEtC,IAAMI,eAAe,GAAG;IAAEC,GAAG,EAAE,QAAQ;IAAEC,GAAG,EAAE;EAAQ,CAAC;EAEzDpB,SAAS,CAAC,YAAM;IACd,IAAMqB,WAAW,GAAG,IAAIC,IAAI,CAAC,CAAC;IAC9B,IAAMC,aAAa,GAAGF,WAAW,CAACG,WAAW,CAAC,CAAC,CAACC,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC;IAChErB,KAAK,CACFsB,GAAG,CAAC,uFAAuF,GAACH,aAAa,GAAC,KAAK,CAAC,CAChHI,IAAI;MAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAC,WAAOC,QAAQ,EAAK;QACxB,IAAMC,YAAY,GAAGD,QAAQ,CAACE,IAAI;QAClCf,iBAAiB,CAACc,YAAY,CAACE,GAAG,CAAC,UAACC,YAAY;UAAA,OAAKA,YAAY;QAAA,EAAC,CAAC;QAGnE,KAAK,IAAIA,YAAY,IAAIH,YAAY,EAAE;UACrC,IAAMI,GAAG,SAAS5B,MAAM,CAACD,UAAU,CAACD,EAAE,EAAE,OAAO,CAAC,EAAE6B,YAAY,CAAC;QACjE;MACF,CAAC;MAAA,iBAAAE,EAAA;QAAA,OAAAR,IAAA,CAAAS,KAAA,OAAAC,SAAA;MAAA;IAAA,IAAC,CACDC,KAAK,CAAC,UAACC,KAAK,EAAK;MAChBC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACpB,CAAC,CAAC;EACN,CAAC,EAAE,EAAE,CAAC;EAGN,OACE7B,IAAA,CAACR,IAAI;IAACwC,KAAK,EAAEC,MAAM,CAACC,SAAU;IAAAC,QAAA,EAC3B9B,cAAc,CAACiB,GAAG,CAAC,UAACC,YAAY,EAAEa,KAAK;MAAA,OACtCtC,KAAA,CAACP,IAAI;QAAA4C,QAAA,GAAcZ,YAAY,CAACc,UAAU,EAAC,GAAC,EAACd,YAAY,CAACe,OAAO,EAAC,GAAC,EAACf,YAAY,CAACgB,kBAAkB;MAAA,GAAxFH,KAA+F,CAAC;IAAA,CAC5G;EAAC,CACE,CAAC;AAEX;AACA,IAAMH,MAAM,GAAG3C,UAAU,CAACkD,MAAM,CAAC;EAC/BN,SAAS,EAAE;IACTO,IAAI,EAAE,CAAC;IACPC,eAAe,EAAE,MAAM;IACvBC,UAAU,EAAE,QAAQ;IACpBC,cAAc,EAAE;EAClB;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}