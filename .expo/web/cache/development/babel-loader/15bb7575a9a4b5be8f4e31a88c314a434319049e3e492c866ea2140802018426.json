{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport axios from 'axios';\nimport { db, collection, addDoc } from \"../firebase.js\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function App() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    actesCulturals = _useState2[0],\n    setActesCulturals = _useState2[1];\n  var currentLocation = {\n    lat: 41.38879,\n    lon: 2.15899\n  };\n  useEffect(function () {\n    var currentDate = new Date();\n    var formattedDate = currentDate.toISOString().substring(0, 10);\n    console.log(formattedDate);\n    axios.get('https://analisi.transparenciacatalunya.cat/resource/rhpv-yr4f.json?$where=data_fi>%27' + formattedDate + '%27').then(function () {\n      var _ref = _asyncToGenerator(function* (response) {\n        var filteredData = response.data;\n        setActesCulturals(filteredData.map(function (acteCultural) {\n          return {\n            code: acteCultural.codi,\n            dataini: acteCultural.datainici,\n            datafi: acteCultural.data_fi,\n            title: acteCultural.denominaci,\n            description: acteCultural.descripcio,\n            infoCost: acteCultural.entrades,\n            hour: acteCultural.horari,\n            listInterests: acteCultural.tags_mbits,\n            linkEvent: acteCultural.enlla_os,\n            linkImage: acteCultural.imatges,\n            adress: acteCultural.adre_a,\n            longitud: acteCultural.longitud,\n            latitud: acteCultural.latitud\n          };\n        }));\n        for (var acteCultural of filteredData) {\n          var linkImages = [];\n          if (acteCultural.imatges) {\n            var images = acteCultural.imatges.split(',');\n            linkImages = images.map(function (image) {\n              return \"https://agenda.cultura.gencat.cat\" + image;\n            });\n          }\n          var linkevents = [];\n          if (acteCultural.enlla_os) {\n            linkevents = acteCultural.enlla_os.split(',');\n          }\n          var res = yield addDoc(collection(db, 'event'), {\n            code: acteCultural.codi,\n            dataini: acteCultural.datainici,\n            datafi: acteCultural.data_fi,\n            title: acteCultural.denominaci,\n            description: acteCultural.descripcio.replace(/&nbsp;/g, ' '),\n            infoCost: acteCultural.entrades.replace(/&nbsp;/g, ' ') || '',\n            hour: acteCultural.horari.replace(/&nbsp;/g, ' ') || '',\n            listInterests: acteCultural.tags_mbits.split(',').map(function (tag) {\n              return tag.split('/')[1];\n            }) || '',\n            linkEvent: linkevents,\n            linkImage: linkImages,\n            adress: acteCultural.adre_a || '',\n            longitud: acteCultural.longitud || '',\n            latitud: acteCultural.latitud || ''\n          });\n        }\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()).catch(function (error) {\n      console.log(error);\n    });\n  }, []);\n  return _jsx(View, {\n    style: styles.container,\n    children: actesCulturals.map(function (acteCultural, index) {\n      return _jsxs(Text, {\n        children: [acteCultural.denominaci, \" \", acteCultural.data_fi, \" \", acteCultural.comarca_i_municipi]\n      }, index);\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","StyleSheet","Text","View","axios","db","collection","addDoc","jsxs","_jsxs","jsx","_jsx","App","_useState","_useState2","_slicedToArray","actesCulturals","setActesCulturals","currentLocation","lat","lon","currentDate","Date","formattedDate","toISOString","substring","console","log","get","then","_ref","_asyncToGenerator","response","filteredData","data","map","acteCultural","code","codi","dataini","datainici","datafi","data_fi","title","denominaci","description","descripcio","infoCost","entrades","hour","horari","listInterests","tags_mbits","linkEvent","enlla_os","linkImage","imatges","adress","adre_a","longitud","latitud","linkImages","images","split","image","linkevents","res","replace","tag","_x","apply","arguments","catch","error","style","styles","container","children","index","comarca_i_municipi","create","flex","backgroundColor","alignItems","justifyContent"],"sources":["C:/Users/Jordi/Desktop/apiex/MiProyecto/src/ApiExample.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { StyleSheet, Text, View } from 'react-native';\r\nimport axios from 'axios';\r\nimport { db, collection, addDoc } from '../firebase.js';\r\n\r\nexport default function App() {\r\n  const [actesCulturals, setActesCulturals] = useState([]);\r\n\r\n    const currentLocation = { lat: 41.38879, lon: 2.15899 }; // coordenadas de ejemplo\r\n\r\n  useEffect(() => {\r\n    const currentDate = new Date();\r\n    const formattedDate = currentDate.toISOString().substring(0, 10);\r\n    console.log(formattedDate)\r\n    axios\r\n      .get('https://analisi.transparenciacatalunya.cat/resource/rhpv-yr4f.json?$where=data_fi>%27'+formattedDate+'%27')\r\n      .then(async (response) => {\r\n        const filteredData = response.data;\r\nsetActesCulturals(\r\n  filteredData.map((acteCultural) => {\r\n    return {\r\n      code:acteCultural.codi,\r\n      dataini:acteCultural.datainici,\r\n      datafi: acteCultural.data_fi,\r\n      title: acteCultural.denominaci,\r\n      description: acteCultural.descripcio,\r\n      infoCost: acteCultural.entrades,\r\n      hour: acteCultural.horari,\r\n      listInterests: acteCultural.tags_mbits,\r\n      linkEvent: acteCultural.enlla_os,\r\n      linkImage: acteCultural.imatges,\r\n      adress: acteCultural.adre_a,\r\n      longitud: acteCultural.longitud,\r\n      latitud: acteCultural.latitud\r\n    };\r\n  })\r\n);\r\n  \r\n        // Guarda los datos en Firebase\r\n        for (let acteCultural of filteredData) {\r\n          let linkImages =[];\r\n          if(acteCultural.imatges){\r\n          const images = acteCultural.imatges.split(',');\r\n          linkImages = images.map(image => `https://agenda.cultura.gencat.cat${image}`);\r\n          }\r\n          let linkevents=[];\r\n          if(acteCultural.enlla_os){\r\n          linkevents = acteCultural.enlla_os.split(',');\r\n          }\r\n          \r\n          const res = await addDoc(collection(db, 'event'), {\r\n            code:acteCultural.codi,\r\n            dataini:acteCultural.datainici,\r\n            datafi: acteCultural.data_fi,\r\n            title: acteCultural.denominaci,\r\n            description: acteCultural.descripcio.replace(/&nbsp;/g, ' '),\r\n            infoCost: acteCultural.entrades.replace(/&nbsp;/g, ' ') || '',\r\n            hour: acteCultural.horari.replace(/&nbsp;/g, ' ') || '',\r\n            listInterests: acteCultural.tags_mbits.split(',').map(tag =>tag.split('/')[1]) || '',\r\n            linkEvent: linkevents,\r\n            linkImage: linkImages,\r\n            adress: acteCultural.adre_a || '',\r\n            longitud: acteCultural.longitud || '',\r\n            latitud: acteCultural.latitud || ''\r\n          });\r\n        }\r\n        \r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  }, []);\r\n  \r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      {actesCulturals.map((acteCultural, index) => (\r\n        <Text key={index}>{acteCultural.denominaci} {acteCultural.data_fi} {acteCultural.comarca_i_municipi}</Text>\r\n      ))}\r\n    </View>\r\n  );\r\n}\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n});\r\n\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAAC,OAAAC,UAAA;AAAA,OAAAC,IAAA;AAAA,OAAAC,IAAA;AAEnD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,EAAE,EAAEC,UAAU,EAAEC,MAAM;AAAyB,SAAAC,IAAA,IAAAC,KAAA;AAAA,SAAAC,GAAA,IAAAC,IAAA;AAExD,eAAe,SAASC,GAAGA,CAAA,EAAG;EAC5B,IAAAC,SAAA,GAA4Cd,QAAQ,CAAC,EAAE,CAAC;IAAAe,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAjDG,cAAc,GAAAF,UAAA;IAAEG,iBAAiB,GAAAH,UAAA;EAEtC,IAAMI,eAAe,GAAG;IAAEC,GAAG,EAAE,QAAQ;IAAEC,GAAG,EAAE;EAAQ,CAAC;EAEzDpB,SAAS,CAAC,YAAM;IACd,IAAMqB,WAAW,GAAG,IAAIC,IAAI,CAAC,CAAC;IAC9B,IAAMC,aAAa,GAAGF,WAAW,CAACG,WAAW,CAAC,CAAC,CAACC,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC;IAChEC,OAAO,CAACC,GAAG,CAACJ,aAAa,CAAC;IAC1BnB,KAAK,CACFwB,GAAG,CAAC,uFAAuF,GAACL,aAAa,GAAC,KAAK,CAAC,CAChHM,IAAI;MAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAC,WAAOC,QAAQ,EAAK;QACxB,IAAMC,YAAY,GAAGD,QAAQ,CAACE,IAAI;QAC1CjB,iBAAiB,CACfgB,YAAY,CAACE,GAAG,CAAC,UAACC,YAAY,EAAK;UACjC,OAAO;YACLC,IAAI,EAACD,YAAY,CAACE,IAAI;YACtBC,OAAO,EAACH,YAAY,CAACI,SAAS;YAC9BC,MAAM,EAAEL,YAAY,CAACM,OAAO;YAC5BC,KAAK,EAAEP,YAAY,CAACQ,UAAU;YAC9BC,WAAW,EAAET,YAAY,CAACU,UAAU;YACpCC,QAAQ,EAAEX,YAAY,CAACY,QAAQ;YAC/BC,IAAI,EAAEb,YAAY,CAACc,MAAM;YACzBC,aAAa,EAAEf,YAAY,CAACgB,UAAU;YACtCC,SAAS,EAAEjB,YAAY,CAACkB,QAAQ;YAChCC,SAAS,EAAEnB,YAAY,CAACoB,OAAO;YAC/BC,MAAM,EAAErB,YAAY,CAACsB,MAAM;YAC3BC,QAAQ,EAAEvB,YAAY,CAACuB,QAAQ;YAC/BC,OAAO,EAAExB,YAAY,CAACwB;UACxB,CAAC;QACH,CAAC,CACH,CAAC;QAGO,KAAK,IAAIxB,YAAY,IAAIH,YAAY,EAAE;UACrC,IAAI4B,UAAU,GAAE,EAAE;UAClB,IAAGzB,YAAY,CAACoB,OAAO,EAAC;YACxB,IAAMM,MAAM,GAAG1B,YAAY,CAACoB,OAAO,CAACO,KAAK,CAAC,GAAG,CAAC;YAC9CF,UAAU,GAAGC,MAAM,CAAC3B,GAAG,CAAC,UAAA6B,KAAK;cAAA,6CAAwCA,KAAK;YAAA,CAAE,CAAC;UAC7E;UACA,IAAIC,UAAU,GAAC,EAAE;UACjB,IAAG7B,YAAY,CAACkB,QAAQ,EAAC;YACzBW,UAAU,GAAG7B,YAAY,CAACkB,QAAQ,CAACS,KAAK,CAAC,GAAG,CAAC;UAC7C;UAEA,IAAMG,GAAG,SAAS3D,MAAM,CAACD,UAAU,CAACD,EAAE,EAAE,OAAO,CAAC,EAAE;YAChDgC,IAAI,EAACD,YAAY,CAACE,IAAI;YACtBC,OAAO,EAACH,YAAY,CAACI,SAAS;YAC9BC,MAAM,EAAEL,YAAY,CAACM,OAAO;YAC5BC,KAAK,EAAEP,YAAY,CAACQ,UAAU;YAC9BC,WAAW,EAAET,YAAY,CAACU,UAAU,CAACqB,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC;YAC5DpB,QAAQ,EAAEX,YAAY,CAACY,QAAQ,CAACmB,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,IAAI,EAAE;YAC7DlB,IAAI,EAAEb,YAAY,CAACc,MAAM,CAACiB,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,IAAI,EAAE;YACvDhB,aAAa,EAAEf,YAAY,CAACgB,UAAU,CAACW,KAAK,CAAC,GAAG,CAAC,CAAC5B,GAAG,CAAC,UAAAiC,GAAG;cAAA,OAAGA,GAAG,CAACL,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAAA,EAAC,IAAI,EAAE;YACpFV,SAAS,EAAEY,UAAU;YACrBV,SAAS,EAAEM,UAAU;YACrBJ,MAAM,EAAErB,YAAY,CAACsB,MAAM,IAAI,EAAE;YACjCC,QAAQ,EAAEvB,YAAY,CAACuB,QAAQ,IAAI,EAAE;YACrCC,OAAO,EAAExB,YAAY,CAACwB,OAAO,IAAI;UACnC,CAAC,CAAC;QACJ;MAEF,CAAC;MAAA,iBAAAS,EAAA;QAAA,OAAAvC,IAAA,CAAAwC,KAAA,OAAAC,SAAA;MAAA;IAAA,IAAC,CACDC,KAAK,CAAC,UAACC,KAAK,EAAK;MAChB/C,OAAO,CAACC,GAAG,CAAC8C,KAAK,CAAC;IACpB,CAAC,CAAC;EACN,CAAC,EAAE,EAAE,CAAC;EAGN,OACE9D,IAAA,CAACR,IAAI;IAACuE,KAAK,EAAEC,MAAM,CAACC,SAAU;IAAAC,QAAA,EAC3B7D,cAAc,CAACmB,GAAG,CAAC,UAACC,YAAY,EAAE0C,KAAK;MAAA,OACtCrE,KAAA,CAACP,IAAI;QAAA2E,QAAA,GAAczC,YAAY,CAACQ,UAAU,EAAC,GAAC,EAACR,YAAY,CAACM,OAAO,EAAC,GAAC,EAACN,YAAY,CAAC2C,kBAAkB;MAAA,GAAxFD,KAA+F,CAAC;IAAA,CAC5G;EAAC,CACE,CAAC;AAEX;AACA,IAAMH,MAAM,GAAG1E,UAAU,CAAC+E,MAAM,CAAC;EAC/BJ,SAAS,EAAE;IACTK,IAAI,EAAE,CAAC;IACPC,eAAe,EAAE,MAAM;IACvBC,UAAU,EAAE,QAAQ;IACpBC,cAAc,EAAE;EAClB;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}