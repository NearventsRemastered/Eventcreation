{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport axios from 'axios';\nimport { db, collection, addDoc } from \"../firebase.js\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function App() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    actesCulturals = _useState2[0],\n    setActesCulturals = _useState2[1];\n  var currentLocation = {\n    lat: 41.38879,\n    lon: 2.15899\n  };\n  useEffect(function () {\n    var currentDate = new Date();\n    var formattedDate = currentDate.toISOString().substring(0, 10);\n    axios.get('https://analisi.transparenciacatalunya.cat/resource/rhpv-yr4f.json?$where=data_fi>%27' + formattedDate + '%27').then(function () {\n      var _ref = _asyncToGenerator(function* (response) {\n        var filteredData = response.data;\n        setActesCulturals(filteredData.map(function (acteCultural) {\n          return {\n            datafi: acteCultural.data_fi,\n            title: acteCultural.denominaci,\n            description: acteCultural.descripcio,\n            infoCost: acteCultural.entrades,\n            hour: acteCultural.horari,\n            listInterests: acteCultural.tags_ambits,\n            linkEvent: acteCultural.enlla_os,\n            linkImage: acteCultural.imatges,\n            adress: acteCultural.adre_a,\n            longitud: acteCultural.longitud,\n            latitud: acteCultural.latitud\n          };\n        }));\n        for (var acteCultural of filteredData) {\n          var res = yield addDoc(collection(db, 'event'), {\n            datafi: acteCultural.data_fi,\n            title: acteCultural.denominaci,\n            description: acteCultural.descripcio,\n            infoCost: acteCultural.entrades || '',\n            hour: acteCultural.horari,\n            listInterests: acteCultural.tags_ambits,\n            linkEvent: acteCultural.enlla_os,\n            linkImage: acteCultural.imatges,\n            adress: acteCultural.adre_a,\n            longitud: acteCultural.longitud,\n            latitud: acteCultural.latitud\n          });\n        }\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()).catch(function (error) {\n      console.log(error);\n    });\n  }, []);\n  return _jsx(View, {\n    style: styles.container,\n    children: actesCulturals.map(function (acteCultural, index) {\n      return _jsxs(Text, {\n        children: [acteCultural.denominaci, \" \", acteCultural.data_fi, \" \", acteCultural.comarca_i_municipi]\n      }, index);\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","StyleSheet","Text","View","axios","db","collection","addDoc","jsxs","_jsxs","jsx","_jsx","App","_useState","_useState2","_slicedToArray","actesCulturals","setActesCulturals","currentLocation","lat","lon","currentDate","Date","formattedDate","toISOString","substring","get","then","_ref","_asyncToGenerator","response","filteredData","data","map","acteCultural","datafi","data_fi","title","denominaci","description","descripcio","infoCost","entrades","hour","horari","listInterests","tags_ambits","linkEvent","enlla_os","linkImage","imatges","adress","adre_a","longitud","latitud","res","_x","apply","arguments","catch","error","console","log","style","styles","container","children","index","comarca_i_municipi","create","flex","backgroundColor","alignItems","justifyContent"],"sources":["C:/Users/Jordi/Desktop/apiex/MiProyecto/src/ApiExample.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { StyleSheet, Text, View } from 'react-native';\r\nimport axios from 'axios';\r\nimport { db, collection, addDoc } from '../firebase.js';\r\n\r\nexport default function App() {\r\n  const [actesCulturals, setActesCulturals] = useState([]);\r\n\r\n    const currentLocation = { lat: 41.38879, lon: 2.15899 }; // coordenadas de ejemplo\r\n\r\n  useEffect(() => {\r\n    const currentDate = new Date();\r\n    const formattedDate = currentDate.toISOString().substring(0, 10);\r\n    axios\r\n      .get('https://analisi.transparenciacatalunya.cat/resource/rhpv-yr4f.json?$where=data_fi>%27'+formattedDate+'%27')\r\n      .then(async (response) => {\r\n        const filteredData = response.data;\r\nsetActesCulturals(\r\n  filteredData.map((acteCultural) => {\r\n    return {\r\n      datafi: acteCultural.data_fi,\r\n      title: acteCultural.denominaci,\r\n      description: acteCultural.descripcio,\r\n      infoCost: acteCultural.entrades,\r\n      hour: acteCultural.horari,\r\n      listInterests: acteCultural.tags_ambits,\r\n      linkEvent: acteCultural.enlla_os,\r\n      linkImage: acteCultural.imatges,\r\n      adress: acteCultural.adre_a,\r\n      longitud: acteCultural.longitud,\r\n      latitud: acteCultural.latitud\r\n    };\r\n  })\r\n);\r\n  \r\n        // Guarda los datos en Firebase\r\n        for (let acteCultural of filteredData) {\r\n          const res = await addDoc(collection(db, 'event'), {\r\n            datafi: acteCultural.data_fi,\r\n            title: acteCultural.denominaci,\r\n            description: acteCultural.descripcio,\r\n            infoCost: acteCultural.entrades || '',\r\n            hour: acteCultural.horari,\r\n            listInterests: acteCultural.tags_ambits,\r\n            linkEvent: acteCultural.enlla_os,\r\n            linkImage: acteCultural.imatges,\r\n            adress: acteCultural.adre_a,\r\n            longitud: acteCultural.longitud,\r\n            latitud: acteCultural.latitud\r\n          });\r\n        }\r\n        \r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  }, []);\r\n  \r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      {actesCulturals.map((acteCultural, index) => (\r\n        <Text key={index}>{acteCultural.denominaci} {acteCultural.data_fi} {acteCultural.comarca_i_municipi}</Text>\r\n      ))}\r\n    </View>\r\n  );\r\n}\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n});\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}